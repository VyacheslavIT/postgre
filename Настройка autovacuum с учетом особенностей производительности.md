
* Создать инстанс ВМ с 2 ядрами и 4 Гб ОЗУ и SSD 10GB
* Установить на него PostgreSQL 15 с дефолтными настройками
* Создать БД для тестов: выполнить pgbench -i postgres
* Запустить pgbench -c8 -P 6 -T 60 -U postgres postgres
* Применить параметры настройки PostgreSQL из прикрепленного к материалам занятия файла
* Протестировать заново
* Что изменилось и почему?
* Создать таблицу с текстовым полем и заполнить случайными или сгенерированными данным в размере 1млн строк
```sql
create table test (c1 text);

test_outus=# select count(*) from test;
 count 
-------
     0
(1 row)

```
```sql

CREATE FUNCTION insert_test()  
RETURNS void AS
$BODY$
DECLARE
  rec text;
BEGIN
  FOR rec IN 1..1000000 LOOP
    INSERT INTO test VALUES (rec);
  END LOOP;
END;
$BODY$
  LANGUAGE plpgsql;
  
 select insert_test();

test_outus=# select count(*) from test;
  count  
---------
 1000000
(1 row)


```

 ---------------------- 
* Посмотреть размер файла с таблицей
```sql
test_outus=# SELECT pg_size_pretty(pg_TABLE_size('test'));
 pg_size_pretty 
----------------
 35 MB
(1 row)
```
-----------------------  
* 5 раз обновить все строчки и добавить к каждой строчке любой символ
* Посмотреть количество мертвых строчек в таблице и когда последний раз приходил автовакуум
* Подождать некоторое время, проверяя, пришел ли автовакуум
* 5 раз обновить все строчки и добавить к каждой строчке любой символ
* Посмотреть размер файла с таблицей
* Отключить Автовакуум на конкретной таблице
* 10 раз обновить все строчки и добавить к каждой строчке любой символ
* Посмотреть размер файла с таблицей
* Объясните полученный результат
* Не забудьте включить автовакуум)
* Задание со *:
* Написать анонимную процедуру, в которой в цикле 10 раз обновятся все строчки в искомой таблице.
Не забыть вывести номер шага цикла.
