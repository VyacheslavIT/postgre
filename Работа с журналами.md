* Настройте выполнение контрольной точки раз в 30 секунд.
  
```sql
alter system set checkpoint_timeout = '30s';
ALTER SYSTEM
```
```sql
postgres=# show checkpoint_timeout;
 checkpoint_timeout 
--------------------
 30s
(1 row)
```

-----------------------------


* 10 минут c помощью утилиты pgbench подавайте нагрузку.
  
pgbench -T 600 pgbench
  


----------------------- 



* Измерьте, какой объем журнальных файлов был сгенерирован за это время. Оцените, какой объем приходится в среднем на одну контрольную точку.
```sql
pgbench=# select * from pg_ls_waldir()
;
           name           |   size   |      modification      
--------------------------+----------+------------------------
 00000001000000000000003D | 16777216 | 2024-01-20 16:15:39+03
 00000001000000000000003F | 16777216 | 2024-01-20 16:14:27+03
 00000001000000000000003E | 16777216 | 2024-01-20 16:14:54+03
 00000001000000000000003C | 16777216 | 2024-01-20 16:15:04+03
(4 rows)
```

-rw------- 1 postgres postgres  16M Jan 20 16:16 00000001000000000000003D

-rw------- 1 postgres postgres  16M Jan 20 16:14 00000001000000000000003E

-rw------- 1 postgres postgres  16M Jan 20 16:14 00000001000000000000003F

-rw------- 1 postgres postgres  16M Jan 20 16:15 000000010000000000000040

drwx------ 2 postgres postgres 4.0K Jan  1 21:08 archive_status

Обьем wal сгенерированных файлов 64мб.

----------------------------



* Проверьте данные статистики: все ли контрольные точки выполнялись точно по расписанию. Почему так произошло?

-----------------------------



* Сравните tps в синхронном/асинхронном режиме утилитой pgbench. Объясните полученный результат.
-----------------------------



* Создайте новый кластер с включенной контрольной суммой страниц. Создайте таблицу. Вставьте несколько значений. Выключите кластер. Измените пару байт в таблице. Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?





------------------------------
